{"version":3,"sources":["jquery.cryodex.js"],"names":["$","window","pluginName","defaults","baseColours","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","legend","Cryodex","element","options","this","append","colours","jQuery","parseJSON","css","replace","extend","_defaults","_name","_counter","init","prototype","attr","_gauge","_doughnut","_bar","_line","_progress","addClass","_getColour","colour","t","Object","keys","length","_getColourAlpha","opacity","substr","rgb","split","test","c","substring","join","value1","value2","chart","Chart","type","responsive","data","labels","datasets","label","backgroundColor","hoverBackgroundColor","borderWidth","display","tooltips","enabled","cutoutPercentage","rotation","Math","PI","onClick","base","table","eq","hide","Array","each","push","text","dataset_item","legendCallback","console","log","i","html","generateLegend","charttype","chartoptions","scales","xAxes","stacked","yAxes","pointRadius","pointHoverRadius","pointBackgroundColor","borderColor","pointBorderColor","pointHitRadius","mode","hover","fn","document"],"mappings":"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","file":"jquery.cryodex.min.js","sourcesContent":["; (function ($, window, document, undefined) {\r\n\tvar pluginName = \"cryodex\",\r\n\t\tdefaults = {\r\n\t\t\tbaseColours: {\r\n\t\t\t\tfirst: '#1abc9c',\r\n\t\t\t\tsecond: '#e74c3c',\r\n\t\t\t\tthird: '#3498db',\r\n\t\t\t\tfourth: '#9b59b6',\r\n\t\t\t\tfifth: '#34495e',\r\n\t\t\t\tsixth: '#2ecc71',\r\n\t\t\t\tseventh: '#e67e22',\r\n\t\t\t\teighth: '#f1c40f',\r\n\t\t\t\tninth: '#7f8c8d',\r\n\t\t\t\ttenth: '#d35400' \r\n\t\t\t},\r\n\t\t\tlegend: {}\r\n\t\t};\r\n\r\n\tfunction Cryodex(element, options) {\r\n\t\tthis.element = element;\r\n\r\n\t\t$('body').append('<div id=\"cryodex-js-colour-config\"></div>');\r\n\t\tcolours =  jQuery.parseJSON($('#cryodex-js-colour-config').css('content').replace(/\"/g,'').replace(/'/g,'\"'));\r\n\r\n\t\tif (typeof(colours) == 'object') {\r\n\t\t\tdefaults.colours = colours;\r\n\t\t} else {\r\n\t\t\tdefaults.colours = defaults.baseColours;\r\n\t\t}\r\n\r\n\t\tthis.options = $.extend({}, defaults, options);\r\n\r\n\t\tthis._defaults = defaults;\r\n\t\tthis._name = pluginName;\r\n\r\n\t\tthis._counter = 0 ;\r\n\r\n\t\tthis.init();\r\n\t}\r\n\r\n\tCryodex.prototype = {\r\n\r\n\t\tinit: function () {\r\n\t\t\tswitch ($(this.element).attr('data-cryodex-widget')) {\r\n\t\t\t\tcase 'gauge':\r\n\t\t\t\t\tthis._gauge();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'doughnut':\r\n\t\t\t\t\tthis._doughnut();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'bar':\r\n\t\t\t\t\tthis._bar('bar');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'horizontal-bar':\r\n\t\t\t\t\tthis._bar('horizontalBar');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'line':\r\n\t\t\t\t\tthis._line();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'progress':\r\n\t\t\t\t\tthis._progress();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t$(this.element).addClass('cryodex-loaded');\r\n\t\t},\r\n\r\n\t\t_getColour: function(colour) {\r\n\t\t\tif (typeof (colour) == 'undefined' || colour == '') {\r\n\t\t\t\tcolour = this.options.colours[Object.keys(this.options.colours)[this._counter % Object.keys(this.options.colours).length]];\r\n\t\t\t} else if (typeof (this.options.colours[colour]) != 'undefined') {\r\n\t\t\t\tcolour = this.options.colours[colour];\r\n\t\t\t} else if (typeof (this._defaults.baseColours[colour]) != 'undefined') {\r\n\t\t\t\tcolour = this._defaults.baseColours[colour];\r\n\t\t\t}\r\n\t\t\treturn colour;\r\n\t\t},\r\n\r\n\t\t_getColourAlpha: function (colour, opacity) {\r\n\t\t\tcolour = this._getColour(colour);\r\n\t\t\tif (colour.substr(0, 5) == 'rgba(') {\r\n\t\t\t\trgb = colour.replace('rgba(', '').replace(')', '');\r\n\t\t\t\trgb = rgb.split(',');\r\n\t\t\t\tcolour = 'rgba(' + rgb[0] + ',' + rgb[1] + ',' + rgb[2] + ',' + opacity + ')';\r\n\t\t\t} else if (colour.substr(0, 4) == 'rgb(') {\r\n\t\t\t\trgb = colour.replace('rgb(', '').replace(')', '');\r\n\t\t\t\trgb = rgb.split(',');\r\n\t\t\t\tcolour = 'rgba(' + rgb[0] + ',' + rgb[1] + ',' + rgb[2] + ',' + opacity + ')';\r\n\t\t\t} else if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(colour)) {\r\n\t\t\t\tc = colour.substring(1).split('');\r\n\t\t\t\tif (c.length == 3) {\r\n\t\t\t\t\tc = [c[0], c[0], c[1], c[1], c[2], c[2]];\r\n\t\t\t\t}\r\n\t\t\t\tc = '0x' + c.join('');\r\n\t\t\t\tcolour = 'rgba(' + [(c >> 16) & 255, (c >> 8) & 255, c & 255].join(',') + ',' + opacity + ')';\r\n\t\t\t}\r\n\r\n\t\t\treturn colour;\r\n\t\t},\r\n\r\n\t\t_gauge: function () {\r\n\t\t\tthis._counter = 0;\r\n\r\n\t\t\tvar value1 = $(this.element).attr('data-percent') * 0.75;\r\n\t\t\tvar value2 = 75 - value1;\r\n\t\t\tvar colour = this._getColour($(this.element).attr('data-colour'));\r\n\r\n\t\t\t$(this.element).append('<canvas />');\r\n\t\t\tthis.chart = new Chart($('canvas', this.element), {\r\n\t\t\t\ttype: 'doughnut',\r\n\t\t\t\tresponsive: true,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tlabels: ['Complete', null],\r\n\t\t\t\t\tdatasets: [{\r\n\t\t\t\t\t\tlabel: 'progress',\r\n\t\t\t\t\t\tdata: [value1, value2, 25],\r\n\t\t\t\t\t\tbackgroundColor: [\r\n\t\t\t\t\t\t\tcolour,\r\n\t\t\t\t\t\t\t'#ddd',\r\n\t\t\t\t\t\t\t'transparent'\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\thoverBackgroundColor: [\r\n\t\t\t\t\t\t\tcolour,\r\n\t\t\t\t\t\t\t'#ddd',\r\n\t\t\t\t\t\t\t'transparent'\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t\tborderWidth: 0\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\toptions: {\r\n\t\t\t\t\tlegend: { display: false },\r\n\t\t\t\t\ttooltips: { enabled: false },\r\n\t\t\t\t\tcutoutPercentage: 70,\r\n\t\t\t\t\trotation: 0.75 * Math.PI,\r\n\t\t\t\t\tonClick: window[$(this.element).attr('data-click')]\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_doughnut: function () {\r\n\t\t\tvar base = this;\r\n\t\t\tbase._counter = 0;\r\n\r\n\t\t\tvar table = $('table', this.element).eq(0).hide();\r\n\r\n\t\t\tvar labels = new Array();\r\n\t\t\t$('thead th', table).each(function () {\r\n\t\t\t\tlabels.push($(this).text());\r\n\t\t\t});\r\n\r\n\t\t\tvar datasets = new Array();\r\n\t\t\t$('tbody tr', table).each(function () {\r\n\t\t\t\tvar dataset_item = new Object();\r\n\t\t\t\tdataset_item.label = $(this).attr('data-label');\r\n\t\t\t\tdataset_item.data = new Array();\r\n\t\t\t\tdataset_item.backgroundColor = new Array();\r\n\t\t\t\t$('td', this).each(function () {\r\n\t\t\t\t\tdataset_item.data.push($(this).text());\r\n\t\t\t\t\tdataset_item.backgroundColor.push(base._getColour($(this).attr('data-colour')));\r\n\t\t\t\t\tbase._counter ++;\r\n\t\t\t\t});\r\n\t\t\t\tdataset_item.borderWidth = 0;\r\n\t\t\t\tdatasets.push(dataset_item);\r\n\t\t\t});\r\n\t\t\tvar legend = this.options.legend;\r\n\t\t\t//legend.position = 'left';\r\n\t\t\tlegend.display = false;\r\n\t\t\tif ($(this.element).attr('data-legend-click')) {\r\n\t\t\t\tlegend.onClick = window[$(this.element).attr('data-legend-click')];\r\n\t\t\t}\r\n\r\n\t\t\t$(this.element).append('<div class=\"cryodex-chart-wrapper\"><div class=\"cryodex-legend\" /><div class=\"cryodex-chart\"><canvas /></div></div>');\r\n\t\t\tthis.chart = new Chart($('canvas', this.element), {\r\n\t\t\t\ttype: 'doughnut',\r\n\t\t\t\tresponsive: true,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tlabels: labels,\r\n\t\t\t\t\tdatasets: datasets\r\n\t\t\t\t},\r\n\t\t\t\toptions: {\r\n\t\t\t\t\tlegend: legend,\r\n\t\t\t\t\tonClick: window[$(this.element).attr('data-click')],\r\n\t\t\t\t\tlegendCallback: function(chart) {\r\n\t\t\t\t\t\tconsole.log(chart.data);\r\n\t\t\t\t\t\tvar text = [];\r\n\t\t\t\t\t\ttext.push('<ul>');\r\n\t\t\t\t\t\tfor (var i=0; i<chart.data.datasets[0].data.length; i++) {\r\n\t\t\t\t\t\t\ttext.push('<li>');\r\n\t\t\t\t\t\t\tconsole.log($(base.element).attr('data-legend-click'));\r\n\t\t\t\t\t\t\tif ($(base.element).attr('data-legend-click')) {\r\n\t\t\t\t\t\t\t\ttext.push('<a href=\"javascript:' + $(base.element).attr('data-legend-click') + '(null, {index: ' + i +', text: \\'' + chart.data.labels[i] + '\\'});\">');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttext.push('<span style=\"background-color:' + chart.data.datasets[0].backgroundColor[i] + '\">&nbsp;</span>');\r\n\t\t\t\t\t\t\tif (chart.data.labels[i]) {\r\n\t\t\t\t\t\t\t\ttext.push(chart.data.labels[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ($(base.element).attr('data-legend-click')) {\r\n\t\t\t\t\t\t\t\ttext.push('</a>');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttext.push('</li>');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttext.push('</ul>');\r\n\t\t\t\t\t\treturn text.join(\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\t\t\t\t\r\n\t\t\t});\r\n\t\t\t$('.cryodex-legend', this.element).html(this.chart.generateLegend());\r\n\t\t},\r\n\r\n\t\t_bar: function (charttype) {\r\n\t\t\tvar base = this;\r\n\t\t\tbase._counter = 0;\r\n\r\n\t\t\tvar table = $('table', this.element).eq(0).hide();\r\n\r\n\t\t\tvar labels = new Array();\r\n\t\t\t$('thead th', table).each(function () {\r\n\t\t\t\tlabels.push($(this).text());\r\n\t\t\t});\r\n\r\n\t\t\tvar datasets = new Array();\r\n\t\t\t$('tbody tr', table).each(function () {\r\n\t\t\t\tvar dataset_item = new Object();\r\n\t\t\t\tdataset_item.label = $(this).attr('data-label');\r\n\t\t\t\tdataset_item.data = new Array();\r\n\t\t\t\tdataset_item.backgroundColor = new Array();\r\n\t\t\t\t$('td', this).each(function () {\r\n\t\t\t\t\tdataset_item.data.push($(this).text());\r\n\t\t\t\t\tdataset_item.backgroundColor.push(base._getColour($(this).attr('data-colour')));\r\n\t\t\t\t\tbase._counter ++;\r\n\t\t\t\t});\r\n\t\t\t\tdataset_item.borderWidth = 0;\r\n\t\t\t\tdatasets.push(dataset_item);\r\n\t\t\t});\r\n\r\n\t\t\tvar chartoptions = {\r\n\t\t\t\tlegend: { display: false },\r\n\t\t\t\tonClick: window[$(this.element).attr('data-click')]\r\n\t\t\t}\r\n\r\n\t\t\tif ($(this.element).attr('data-stacked')) {\r\n\t\t\t\tchartoptions.scales = {\r\n\t\t\t\t\txAxes: [{ stacked: true }],\r\n\t\t\t\t\tyAxes: [{ stacked: true }]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t$(this.element).append('<canvas />');\r\n\t\t\tthis.chart = new Chart($('canvas', this.element), {\r\n\t\t\t\ttype: charttype,\r\n\t\t\t\tresponsive: true,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tlabels: labels,\r\n\t\t\t\t\tdatasets: datasets\r\n\t\t\t\t},\r\n\t\t\t\toptions: chartoptions\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_line: function () {\r\n\t\t\tvar base = this;\r\n\t\t\tbase._counter = 0;\r\n\r\n\t\t\tvar table = $('table', this.element).eq(0).hide();\r\n\r\n\t\t\tvar labels = new Array();\r\n\t\t\t$('thead th', table).each(function () {\r\n\t\t\t\tlabels.push($(this).text());\r\n\t\t\t});\r\n\r\n\t\t\tvar datasets = new Array();\r\n\t\t\t$('tbody tr', table).each(function () {\r\n\t\t\t\tvar dataset_item = new Object();\r\n\t\t\t\tdataset_item.label = $(this).attr('data-label');\r\n\t\t\t\tdataset_item.data = new Array();\r\n\t\t\t\tdataset_item.pointRadius = 3;\r\n\t\t\t\tdataset_item.pointHoverRadius = 5;\r\n\t\t\t\tvar colour = base._getColour($(this).attr('data-colour'));\r\n\t\t\t\tdataset_item.pointBackgroundColor = colour;\r\n\t\t\t\tdataset_item.borderColor = colour;\r\n\t\t\t\tdataset_item.pointBorderColor = '#fff';\r\n\t\t\t\tdataset_item.pointHitRadius = 20;\r\n\t\t\t\tif (typeof ($(this).attr('data-fill')) != 'undefined') {\r\n\t\t\t\t\tdataset_item.backgroundColor = base._getColourAlpha($(this).attr('data-colour'), 0.6);\r\n\t\t\t\t}\r\n\t\t\t\t$('td', this).each(function () {\r\n\t\t\t\t\tdataset_item.data.push($(this).text());\r\n\t\t\t\t});\r\n\t\t\t\tdatasets.push(dataset_item);\r\n\t\t\t\tbase._counter ++;\r\n\t\t\t});\r\n\r\n\t\t\t$(this.element).append('<canvas />');\r\n\t\t\tthis.chart = new Chart($('canvas', this.element), {\r\n\t\t\t\ttype: 'line',\r\n\t\t\t\tresponsive: true,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tlabels: labels,\r\n\t\t\t\t\tdatasets: datasets\r\n\t\t\t\t},\r\n\t\t\t\toptions: {\r\n\t\t\t\t\tlegend: { display: false },\r\n\t\t\t\t\ttooltips: { mode: 'x-axis' },\r\n\t\t\t\t\thover: { mode: 'x-axis' },\r\n\t\t\t\t\tonClick: window[$(this.element).attr('data-click')]\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t_progress: function() {\r\n\t\t\t$(this.element).attr('data-value', $(this.element).html());\r\n\t\t},\r\n\t};\r\n\r\n\t// A really lightweight plugin wrapper around the constructor,\r\n\t// preventing against multiple instantiations\r\n\t$.fn[pluginName] = function (options) {\r\n\t\treturn $('[data-cryodex-widget]', this).each(function () {\r\n\t\t\tif (!$.data(this, \"plugin_\" + pluginName)) {\r\n\t\t\t\t$.data(this, \"plugin_\" + pluginName,\r\n\t\t\t\tnew Cryodex(this, options));\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n})(jQuery, window, document);"]}