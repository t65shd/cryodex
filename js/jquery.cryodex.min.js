!function(n,i){var a="cryodex",r={baseColours:{first:"#1abc9c",second:"#e74c3c",third:"#3498db",fourth:"#9b59b6",fifth:"#34495e",sixth:"#2ecc71",seventh:"#e67e22",eighth:"#f1c40f",ninth:"#7f8c8d",tenth:"#d35400"},legend:{}};function e(t,e){this.element=t,n("body").append('<div id="cryodex-js-colour-config"></div>'),colours=jQuery.parseJSON(n("#cryodex-js-colour-config").css("content").replace(/"/g,"").replace(/'/g,'"')),"object"==typeof colours?r.colours=colours:r.colours=r.baseColours,this.options=n.extend({},r,e),this._defaults=r,this._name=a,this._counter=0,this.init()}e.prototype={init:function(){switch(n(this.element).attr("data-cryodex-widget")){case"gauge":this._gauge();break;case"doughnut":this._doughnut();break;case"bar":this._bar("bar");break;case"horizontal-bar":this._bar("horizontalBar");break;case"line":this._line();break;case"progress":this._progress()}n(this.element).addClass("cryodex-loaded")},_getColour:function(t){return void 0===t||""==t?t=this.options.colours[Object.keys(this.options.colours)[this._counter%Object.keys(this.options.colours).length]]:void 0!==this.options.colours[t]?t=this.options.colours[t]:void 0!==this._defaults.baseColours[t]&&(t=this._defaults.baseColours[t]),t},_getColourAlpha:function(t,e){return"rgba("==(t=this._getColour(t)).substr(0,5)?(rgb=t.replace("rgba(","").replace(")",""),rgb=rgb.split(","),t="rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+e+")"):"rgb("==t.substr(0,4)?(rgb=t.replace("rgb(","").replace(")",""),rgb=rgb.split(","),t="rgba("+rgb[0]+","+rgb[1]+","+rgb[2]+","+e+")"):/^#([A-Fa-f0-9]{3}){1,2}$/.test(t)&&(c=t.substring(1).split(""),3==c.length&&(c=[c[0],c[0],c[1],c[1],c[2],c[2]]),c="0x"+c.join(""),t="rgba("+[c>>16&255,c>>8&255,255&c].join(",")+","+e+")"),t},_gauge:function(){this._counter=0;var t=.75*n(this.element).attr("data-percent"),e=75-t,a=this._getColour(n(this.element).attr("data-colour"));n(this.element).append("<canvas />"),this.chart=new Chart(n("canvas",this.element),{type:"doughnut",responsive:!0,data:{labels:["Complete",null],datasets:[{label:"progress",data:[t,e,25],backgroundColor:[a,"#ddd","transparent"],hoverBackgroundColor:[a,"#ddd","transparent"],borderWidth:0}]},options:{legend:{display:!1},tooltips:{enabled:!1},cutoutPercentage:70,rotation:.75*Math.PI,onClick:i[n(this.element).attr("data-click")]}})},_doughnut:function(){var r=this;r._counter=0;var t=n("table",this.element).eq(0).hide(),e=new Array;n("thead th",t).each(function(){e.push(n(this).text())});var a=new Array;n("tbody tr",t).each(function(){var t=new Object;t.label=n(this).attr("data-label"),t.data=new Array,t.backgroundColor=new Array,n("td",this).each(function(){t.data.push(n(this).text()),t.backgroundColor.push(r._getColour(n(this).attr("data-colour"))),r._counter++}),t.borderWidth=0,a.push(t)});var s=this.options.legend;s.display=!1,n(this.element).attr("data-legend-click")&&(s.onClick=i[n(this.element).attr("data-legend-click")]),n(this.element).append('<div class="cryodex-chart-wrapper"><div class="cryodex-legend" /><div class="cryodex-chart"><canvas /></div></div>'),this.chart=new Chart(n("canvas",this.element),{type:"doughnut",responsive:!0,data:{labels:e,datasets:a},options:{legend:s,onClick:i[n(this.element).attr("data-click")],legendCallback:function(t){console.log(t.data);var e=[];e.push("<ul>");for(var a=0;a<t.data.datasets[0].data.length;a++)e.push("<li>"),console.log(n(r.element).attr("data-legend-click")),n(r.element).attr("data-legend-click")&&e.push('<a href="javascript:'+n(r.element).attr("data-legend-click")+"(null, {index: "+a+", text: '"+t.data.labels[a]+"'});\">"),e.push('<span style="background-color:'+t.data.datasets[0].backgroundColor[a]+'">&nbsp;</span>'),t.data.labels[a]&&e.push(t.data.labels[a]),n(r.element).attr("data-legend-click")&&e.push("</a>"),e.push("</li>");return e.push("</ul>"),e.join("")}}}),n(".cryodex-legend",this.element).html(this.chart.generateLegend())},_bar:function(t){var e=this;e._counter=0;var a=n("table",this.element).eq(0).hide(),r=new Array;n("thead th",a).each(function(){r.push(n(this).text())});var s=new Array;n("tbody tr",a).each(function(){var t=new Object;t.label=n(this).attr("data-label"),t.data=new Array,t.backgroundColor=new Array,n("td",this).each(function(){t.data.push(n(this).text()),t.backgroundColor.push(e._getColour(n(this).attr("data-colour"))),e._counter++}),t.borderWidth=0,s.push(t)});var o={legend:{display:!1},onClick:i[n(this.element).attr("data-click")]};n(this.element).attr("data-stacked")&&(o.scales={xAxes:[{stacked:!0}],yAxes:[{stacked:!0}]}),n(this.element).append("<canvas />"),this.chart=new Chart(n("canvas",this.element),{type:t,responsive:!0,data:{labels:r,datasets:s},options:o})},_line:function(){var a=this;a._counter=0;var t=n("table",this.element).eq(0).hide(),e=new Array;n("thead th",t).each(function(){e.push(n(this).text())});var r=new Array;n("tbody tr",t).each(function(){var t=new Object;t.label=n(this).attr("data-label"),t.data=new Array,t.pointRadius=3,t.pointHoverRadius=5;var e=a._getColour(n(this).attr("data-colour"));t.pointBackgroundColor=e,t.borderColor=e,t.pointBorderColor="#fff",t.pointHitRadius=20,void 0!==n(this).attr("data-fill")&&(t.backgroundColor=a._getColourAlpha(n(this).attr("data-colour"),.6)),n("td",this).each(function(){t.data.push(n(this).text())}),r.push(t),a._counter++}),n(this.element).append("<canvas />"),this.chart=new Chart(n("canvas",this.element),{type:"line",responsive:!0,data:{labels:e,datasets:r},options:{legend:{display:!1},tooltips:{mode:"x-axis"},hover:{mode:"x-axis"},onClick:i[n(this.element).attr("data-click")]}})},_progress:function(){n(this.element).attr("data-value",n(this.element).html())}},n.fn[a]=function(t){return n("[data-cryodex-widget]",this).each(function(){n.data(this,"plugin_"+a)||n.data(this,"plugin_"+a,new e(this,t))})}}(jQuery,window,document);
//# sourceMappingURL=jquery.cryodex.min.js.map
